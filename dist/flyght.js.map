{"mappings":"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","sources":["web.js","src/index.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["import Flyght from './src/index.js'\n(function(global){\n    global.Flyght = Flyght\n})(window)","const\ndefaultConfig = {\n    idElement: null,\n    urlConfiguration: [],\n    beforeUpdateContent(content) {\n        return content\n    },\n    afterUpdateContent : null\n},\nregister = ()=> {\n    try {\n        let $links = $context.querySelectorAll('a[data-flyght-link]')\n        if($links) $links.forEach(($el,key,$parent) => {\n            $el.addEventListener('click', linkClickListener, false)\n            config.urlConfiguration.push({ hash: $el.hash || (`#${$el.name || $el.href}`), url: $el.href, type: 'GET' })\n        })\n        plugins.forEach((plugin) => (config = plugin(config)))\n    } catch (e) {\n        errorHandler(e)\n    }\n},\ngetContentElement = () => {\n    let $el = $context.querySelector('*[data-flyght-content]') || $context.body || $context\n    config.idElement = $el.id || ( $el.id = `flyghtContent${Math.random()*1000}`)\n    \n    return $el\n},\nfetchFetch = async (url, opts, callback) => {\n    let response = await fetch(url, Object.assign({},{ method: 'GET', headers: {\n        'Content-Type':'text/html',\n        'Accept':'text/html'\n    } }, opts))\n    response = await (callback? callback(response) : response.text())\n    if(!response) throw 'No response value returned'\n    \n    updateContent(response)\n},hashListener = (e) => {\n    try {\n        let page = config.urlConfiguration.filter((page) => page.hash == window.location.hash || page.url == window.location.href)\n        if(page.length < 1) return false\n        \n        let { url, beforeFetch } = page = page.shift()\n        if(!url) throw \"No URL provided!\"\n        else if((typeof beforeFetch === 'function') && (!(page = beforeFetch(page))) ) return false\n        \n        let { type, options, afterFetch } = page\n        fetchFetch(url, { method: type, ...options }, afterFetch || false )\n    } catch(e) {\n        errorHandler(e)\n    }\n},\ninit = (cfg) => {\n    try {\n        config = Object.assign({},defaultConfig,cfg)\n        $context = window.document\n        element = config.idElement ? $context.getElementById(config.idElement) : getContentElement()\n        window.addEventListener('hashchange',hashListener, false)\n        let onload = window.onload \n        window.onload = (e) => { hashListener(e); onload(e) }\n    } catch (e) {\n        errorHandler(e)\n    }\n    register()\n}, updateContent = (content) => {\n    try {\n        let { beforeUpdateContent, afterUpdateContent } = config\n        if((typeof beforeUpdateContent == 'function') && !(content = beforeUpdateContent(content))) return false\n        \n        element.innerHTML = content\n        if(typeof afterUpdateContent == 'function') afterUpdateContent(element)\n    } catch(e) { \n        errorHandler(e)\n    }\n}, registerPlugin = (plugin) => {\n    plugins.push((cfg) => plugin(cfg))\n}\n\nfunction linkClickListener(e) {\n    e.stopPropagation()\n    e.preventDefault()\n    window.location.hash = e.target.hash || `#${e.target.name}` || `#${e.target.href}`\n}\n\nfunction errorHandler(e) {\n    console.error(e)\n}\n\nlet config = {}, element = null, $context = null, plugins = []\n\nexport default {\n    init,\n    config: () => {\n        return config\n    }, \n    element: () => {\n        return element\n    },\n    linkClickListener, \n    errorHandler,\n    registerPlugin\n}","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":["parcelHelpers","require","_indexJs","window","Flyght","defaultConfig","idElement","urlConfiguration","beforeUpdateContent","content","afterUpdateContent","hashListener","e","page","config","filter","hash","location","url","href","length","beforeFetch","shift","type","options","afterFetch","async","opts","callback","response","fetch","Object","assign","method","headers","Accept","text","updateContent","fetchFetch","errorHandler","element","innerHTML","linkClickListener","stopPropagation","preventDefault","target","name","console","error","$context","plugins","init","cfg","document","getElementById","$el","querySelector","body","id","Math","random","getContentElement","addEventListener","onload","$links","querySelectorAll","forEach","key","$parent","push","plugin","register","registerPlugin","exports","interopDefault","a","__esModule","default","defineInteropFlag","defineProperty","value","exportAll","source","dest","keys","hasOwnProperty","enumerable","get","export","destName"],"version":3,"file":"flyght.js.map"}