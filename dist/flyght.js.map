{"mappings":"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","sources":["web.js","src/index.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["import Flyght from './src/index.js'\n(function(global){\n    global.Flyght = Flyght\n})(window)","const Flyght = class {\n    #config = {}\n    #defaultConfig = {\n        idElement: null,\n        urlConfiguration: [],\n        beforeUpdateContent(content) {\n            return content\n        },\n        afterUpdateContent : null\n    }\n    #element = null\n    constructor(config) {\n        this.#init(config)\n        this.#register()\n    }\n\n    #init(config) {\n        this.#config = Object.assign({},this.#defaultConfig,config)\n        let func = this.#hashListener.bind(this)\n        window.addEventListener('hashchange',func, false)\n\t\twindow.onload = func\n        this.$ = window.document\n        this.#element = this.#config.idElement ? this.$.querySelector(this.#config.idElement) : this.#getContentElement()\n    }\n\n    #register(){\n        try {\n            let $links = this.$.querySelectorAll('a[data-flyght-link]')\n            if($links) $links.forEach(($el,key,$parent) => {\n                $el.addEventListener('click', this.linkClickListener, false)\n                this.#config.urlConfiguration.push({ hash: $el.hash || (`#${$el.name || $el.href}`), url: $el.href, type: 'GET' })\n            })\n        } catch (e) {\n            this.errorHandler(e)\n        }\n    }\n\n    #getContentElement(){\n        let $el = this.$.querySelector('*[data-flyght-content]') ?? document.body\n        this.#config.idElement = $el.id || ( $el.id = `flyghtContent${Math.random()*1000}`)\n        return $el\n    }\n\n    linkClickListener(e) {\n        e.stopPropagation()\n        e.preventDefault()\n        window.location.hash = e.target.hash || `#${e.target.name}` || `#${e.target.href}`\n    }\n\n    get config() {\n        return this.#config\n    }\n\n    get element() {\n        return this.#element\n    }\n\n    async #fetchFetch(url, opts, callback ) {\n        let response = await fetch(url, Object.assign({},{ method: 'GET', headers: {\n            'Content-Type':'text/html',\n            'Accept':'text/html'\n        } }, opts))\n        response = await (callback? callback(response) : response.text())\n        if(!response) throw 'No response value returned'\n        \n        this.#updateContent(response)\n    }\n\n    #hashListener() {\n        try {\n            let page = this.config.urlConfiguration.filter((page) => page.hash == window.location.hash || page.url == window.location.href)\n            if(page.length < 1) return false\n            \n            let { url, beforeFetch } = page = page.shift()\n            if(!url) throw \"No URL provided!\"\n            else if((typeof beforeFetch === 'function') && (!(page = beforeFetch(page))) ) return false\n            \n            let { type, options, afterFetch } = page\n            this.#fetchFetch(url, { method: type, ...options }, afterFetch || false )\n        } catch(e) {\n            this.errorHandler(e)\n        }\n    }\n\n    errorHandler(e) {\n        console.error(e)\n    }\n\n    #updateContent(content) {\n        try {\n            let { beforeUpdateContent, afterUpdateContent } = this.config\n            if((typeof beforeUpdateContent == 'function') && !(content = beforeUpdateContent(content))) return false\n                \n            this.element.innerHTML = content\n            if(typeof afterUpdateContent == 'function') afterUpdateContent(this.element)\n        } catch(e) {this.errorHandler(e)}\n    }\n}\n\nexport default Flyght","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":["parcelHelpers","require","_indexJs","window","Flyght","config","defaultConfig","idElement","urlConfiguration","beforeUpdateContent","content","afterUpdateContent","element","constructor","this","init","register","Object","assign","func","hashListener","bind","addEventListener","onload","$","document","querySelector","getContentElement","$links","querySelectorAll","forEach","$el","key","$parent","linkClickListener","push","hash","name","href","url","type","e","errorHandler","body","id","Math","random","stopPropagation","preventDefault","location","target","async","opts","callback","response","fetch","method","headers","Accept","text","updateContent","page","filter","length","beforeFetch","shift","options","afterFetch","fetchFetch","console","error","innerHTML","exports","interopDefault","a","__esModule","default","defineInteropFlag","defineProperty","value","exportAll","source","dest","keys","hasOwnProperty","enumerable","get","export","destName"],"version":3,"file":"flyght.js.map"}